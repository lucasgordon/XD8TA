<%= turbo_frame_tag "analytics" do %>
  <div class="container-fluid bg-dark text-light" style="height: calc(100vh - 85px);">
    <div class="row h-100">
      <div class="col-md-3 bg-dark border-end border-secondary p-4 overflow-auto" style="height: 100%;">
        <%= link_to "New Chat", new_analytics_chat_path, class: "rounded-0 btn btn-outline-secondary mb-4 w-100", data: { turbo_frame: "_top" } %>
        <%= render partial: 'chat_history', locals: { chats: @chats, current_chat: @current_chat } %>
      </div>

      <div class="col-md-9 p-0">
        <%= turbo_frame_tag "chat" do %>
          <div id="chat">
            <% if @current_chat %>
              <%= render partial: 'chat', locals: { chat: @current_chat } %>
            <% else %>
              <%= render partial: 'analytics_chats/new_chat_form', locals: { user: current_user } %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>